local plr = game.Players.LocalPlayer
local mouse = plr:GetMouse()
local fireball  = game:GetService("ReplicatedStorage").Magic.Fireball
local remote = script.Parent.Parent.Events.Fire
local tool = script.Parent.Parent
local anims = script.Parent.Parent:WaitForChild("Animations")
local assets = script.Parent.Parent.Assets
local CD = true


tool.Activated:Connect(function()
	if CD == true then
		CD = false
		remote:FireServer(plr)

		local ShootTrack = plr.Character.Humanoid:LoadAnimation(anims.Shoot)
		ShootTrack:Play()
		wait()
		assets.Fire:Play()
		
		wait(script.Parent.Parent.Cooldown.Value)
		CD = true

	end
end)

remote.Parent.ShakeCamera.OnClientEvent:Connect(function()

	local StartTime = tick()
	repeat
		wait()
		local EndTime = tick()

		local xOffset = math.random(-100,100) / 500
		local yOffset = math.random(-100,100) / 500
		local zOffset = math.random(-100,100) / 500

		plr.Character.Humanoid.CameraOffset = Vector3.new(xOffset, yOffset, zOffset)

	until EndTime - StartTime >= 0.5
	plr.Character.Humanoid.CameraOffset = Vector3.new(0,0,0)
end)

